{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { selectToken } from \"../auth/authSlice\";\nexport const userSlice = createSlice({\n  name: \"user\",\n  initialState: {\n    users: [],\n    error: null,\n    isLoading: false\n  },\n  reducers: {\n    fetchUsersStart: state => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    fetchUsersSuccess: (state, action) => {\n      state.isLoading = false;\n      state.users = action.payload;\n      state.error = null;\n    },\n    fetchUsersFailure: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    addUserStart: state => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    addUserSuccess: (state, action) => {\n      state.isLoading = false;\n      state.users.push(action.payload);\n      state.error = null;\n    },\n    addUserFailure: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    updateUserStart: state => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    updateUserSuccess: (state, action) => {\n      state.isLoading = false;\n      state.users = state.users.map(user => user.id === action.payload.id ? action.payload : user);\n      state.error = null;\n    },\n    updateUserFailure: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    deleteUserStart: state => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    deleteUserSuccess: (state, action) => {\n      state.isLoading = false;\n      state.users = state.users.filter(user => user.id !== action.payload.id);\n      state.error = null;\n    },\n    deleteUserFailure: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    }\n  }\n});\nexport const {\n  fetchUsersStart,\n  fetchUsersSuccess,\n  fetchUsersFailure,\n  addUserStart,\n  addUserSuccess,\n  addUserFailure,\n  updateUserStart,\n  updateUserSuccess,\n  updateUserFailure,\n  deleteUserStart,\n  deleteUserSuccess,\n  deleteUserFailure\n} = userSlice.actions;\n\n// Async action to fetch users (for admin dashboard)\nexport const fetchUsers = () => async (dispatch, getState) => {\n  dispatch(fetchUsersStart());\n  const token = selectToken(getState());\n  console.log(token);\n  try {\n    const response = await axios.get(\"http://localhost:8000/api/users\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    dispatch(fetchUsersSuccess(response.data));\n  } catch (error) {\n    dispatch(fetchUsersFailure(error.response.data.message));\n  }\n};\n\n// Async action to add a user\nexport const addUser = (name, email, password, role) => async (dispatch, getState) => {\n  dispatch(addUserStart());\n  const token = selectToken(getState());\n  try {\n    const response = await axios.post(\"http://localhost:8000/api/register\", userData, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    dispatch(addUserSuccess(response.data));\n  } catch (error) {\n    dispatch(addUserFailure(error.response.data.message));\n  }\n};\n\n// Async action to update a user\nexport const updateUser = (userId, userData) => async (dispatch, getState) => {\n  dispatch(updateUserStart());\n  const token = selectToken(getState());\n  try {\n    const response = await axios.put(`http://localhost:8000/api/users/${userId}`, userData, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    dispatch(updateUserSuccess(response.data));\n  } catch (error) {\n    dispatch(updateUserFailure(error.response.data.message));\n  }\n};\n\n// Async action to delete a user\nexport const deleteUser = userId => async (dispatch, getState) => {\n  dispatch(deleteUserStart());\n  const token = selectToken(getState());\n  try {\n    const response = await axios.delete(`http://localhost:8000/api/users/${userId}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    dispatch(deleteUserSuccess(response.data));\n  } catch (error) {\n    dispatch(deleteUserFailure(error.response.data.message));\n  }\n};\nexport const selectUsers = state => state.user.users;\nexport default userSlice.reducer;","map":{"version":3,"names":["createSlice","axios","selectToken","userSlice","name","initialState","users","error","isLoading","reducers","fetchUsersStart","state","fetchUsersSuccess","action","payload","fetchUsersFailure","addUserStart","addUserSuccess","push","addUserFailure","updateUserStart","updateUserSuccess","map","user","id","updateUserFailure","deleteUserStart","deleteUserSuccess","filter","deleteUserFailure","actions","fetchUsers","dispatch","getState","token","console","log","response","get","headers","Authorization","data","message","addUser","email","password","role","post","userData","updateUser","userId","put","deleteUser","delete","selectUsers","reducer"],"sources":["/home/chiragramnani/Desktop/project/full-stack-crud/client/src/features/user/userSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { selectToken } from \"../auth/authSlice\";\n\nexport const userSlice = createSlice({\n  name: \"user\",\n  initialState: {\n    users: [],\n    error: null,\n    isLoading: false,\n  },\n  reducers: {\n    fetchUsersStart: (state) => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    fetchUsersSuccess: (state, action) => {\n      state.isLoading = false;\n      state.users = action.payload;\n      state.error = null;\n    },\n    fetchUsersFailure: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    addUserStart: (state) => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    addUserSuccess: (state, action) => {\n      state.isLoading = false;\n      state.users.push(action.payload);\n      state.error = null;\n    },\n    addUserFailure: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    updateUserStart: (state) => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    updateUserSuccess: (state, action) => {\n      state.isLoading = false;\n      state.users = state.users.map((user) =>\n        user.id === action.payload.id ? action.payload : user\n      );\n      state.error = null;\n    },\n    updateUserFailure: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    deleteUserStart: (state) => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    deleteUserSuccess: (state, action) => {\n      state.isLoading = false;\n      state.users = state.users.filter((user) => user.id !== action.payload.id);\n      state.error = null;\n    },\n    deleteUserFailure: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n  },\n});\n\nexport const {\n  fetchUsersStart,\n  fetchUsersSuccess,\n  fetchUsersFailure,\n  addUserStart,\n  addUserSuccess,\n  addUserFailure,\n  updateUserStart,\n  updateUserSuccess,\n  updateUserFailure,\n  deleteUserStart,\n  deleteUserSuccess,\n  deleteUserFailure,\n} = userSlice.actions;\n\n// Async action to fetch users (for admin dashboard)\nexport const fetchUsers = () => async (dispatch, getState) => {\n  dispatch(fetchUsersStart());\n  const token = selectToken(getState());\n  console.log(token);\n  try {\n    const response = await axios.get(\"http://localhost:8000/api/users\", {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n    dispatch(fetchUsersSuccess(response.data));\n  } catch (error) {\n    dispatch(fetchUsersFailure(error.response.data.message));\n  }\n};\n\n// Async action to add a user\nexport const addUser = (name,email,password,role) => async (dispatch, getState) => {\n  dispatch(addUserStart());\n  const token = selectToken(getState());\n  try {\n    const response = await axios.post(\n      \"http://localhost:8000/api/register\",\n      userData,\n      {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      }\n    );\n    dispatch(addUserSuccess(response.data));\n  } catch (error) {\n    dispatch(addUserFailure(error.response.data.message));\n  }\n};\n\n// Async action to update a user\nexport const updateUser = (userId, userData) => async (dispatch, getState) => {\n  dispatch(updateUserStart());\n  const token = selectToken(getState());\n  try {\n    const response = await axios.put(\n      `http://localhost:8000/api/users/${userId}`,\n      userData,\n      {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      }\n    );\n    dispatch(updateUserSuccess(response.data));\n  } catch (error) {\n    dispatch(updateUserFailure(error.response.data.message));\n  }\n};\n\n// Async action to delete a user\nexport const deleteUser = (userId) => async (dispatch, getState) => {\n  dispatch(deleteUserStart());\n  const token = selectToken(getState());\n  try {\n    const response = await axios.delete(\n      `http://localhost:8000/api/users/${userId}`,\n      {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      }\n    );\n    dispatch(deleteUserSuccess(response.data));\n  } catch (error) {\n    dispatch(deleteUserFailure(error.response.data.message));\n  }\n};\n\nexport const selectUsers = (state) => state.user.users;\n\nexport default userSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}