{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { selectToken } from \"../auth/authSlice\";\nexport const userSlice = createSlice({\n  name: \"user\",\n  initialState: {\n    users: [],\n    error: null,\n    isLoading: false\n  },\n  reducers: {\n    fetchUsersStart: state => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    fetchUsersSuccess: (state, action) => {\n      state.isLoading = false;\n      state.users = action.payload;\n      state.error = null;\n    },\n    fetchUsersFailure: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    addUserStart: state => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    addUserSuccess: (state, action) => {\n      state.isLoading = false;\n      state.users.push(action.payload);\n      state.error = null;\n    },\n    addUserFailure: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    updateUserStart: state => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    updateUserSuccess: (state, action) => {\n      state.isLoading = false;\n      const updatedUser = action.payload;\n      const index = state.users.findIndex(user => user.id === updatedUser.id);\n      if (index !== -1) {\n        state.users[index] = updatedPost;\n      }\n      state.error = null;\n    },\n    updateUserFailure: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    deleteUserStart: state => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    deleteUserSuccess: (state, action) => {\n      state.isLoading = false;\n      state.users = state.users.filter(user => user.id !== action.payload);\n      state.error = null;\n    },\n    deleteUserFailure: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    }\n  }\n});\nexport const {\n  fetchUsersStart,\n  fetchUsersSuccess,\n  fetchUsersFailure,\n  addUserStart,\n  addUserSuccess,\n  addUserFailure,\n  updateUserStart,\n  updateUserSuccess,\n  updateUserFailure,\n  deleteUserStart,\n  deleteUserSuccess,\n  deleteUserFailure\n} = userSlice.actions;\n\n// Async action to fetch users (for admin dashboard)\nexport const fetchUsers = () => async (dispatch, getState) => {\n  dispatch(fetchUsersStart());\n  const token = selectToken(getState());\n  console.log(token);\n  try {\n    const response = await axios.get(\"http://localhost:8000/api/users\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    dispatch(fetchUsersSuccess(response.data));\n  } catch (error) {\n    dispatch(fetchUsersFailure(error.response.data.message));\n  }\n};\n\n// Async action to add a user\nexport const addUser = (name, email, password, role) => async (dispatch, getState) => {\n  dispatch(addUserStart());\n  const token = selectToken(getState());\n  try {\n    const response = await axios.post(\"http://localhost:8000/api/register\", {\n      name,\n      email,\n      password,\n      role\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    dispatch(addUserSuccess(response.data.user));\n  } catch (error) {\n    dispatch(addUserFailure(error.response.data.message));\n  }\n};\n\n// Async action to update a user\nexport const updateUser = (userId, userData) => async (dispatch, getState) => {\n  dispatch(updateUserStart());\n  const token = selectToken(getState());\n  try {\n    const response = await axios.put(`http://localhost:8000/api/users/${userId}`, userData, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    dispatch(updateUserSuccess(response.data.user));\n  } catch (error) {\n    dispatch(updateUserFailure(error.response.data.message));\n  }\n};\n\n// Async action to delete a user\nexport const deleteUser = userId => async (dispatch, getState) => {\n  dispatch(deleteUserStart());\n  const token = selectToken(getState());\n  try {\n    await axios.delete(`http://localhost:8000/api/users/${userId}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    dispatch(deleteUserSuccess(userId));\n  } catch (error) {\n    dispatch(deleteUserFailure(error.response.data.message));\n  }\n};\nexport const selectUsers = state => state.user.users;\nexport default userSlice.reducer;","map":{"version":3,"names":["createSlice","axios","selectToken","userSlice","name","initialState","users","error","isLoading","reducers","fetchUsersStart","state","fetchUsersSuccess","action","payload","fetchUsersFailure","addUserStart","addUserSuccess","push","addUserFailure","updateUserStart","updateUserSuccess","updatedUser","index","findIndex","user","id","updatedPost","updateUserFailure","deleteUserStart","deleteUserSuccess","filter","deleteUserFailure","actions","fetchUsers","dispatch","getState","token","console","log","response","get","headers","Authorization","data","message","addUser","email","password","role","post","updateUser","userId","userData","put","deleteUser","delete","selectUsers","reducer"],"sources":["/home/chiragramnani/Desktop/project/full-stack-crud/client/src/features/user/userSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { selectToken } from \"../auth/authSlice\";\n\nexport const userSlice = createSlice({\n  name: \"user\",\n  initialState: {\n    users: [],\n    error: null,\n    isLoading: false,\n  },\n  reducers: {\n    fetchUsersStart: (state) => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    fetchUsersSuccess: (state, action) => {\n      state.isLoading = false;\n      state.users = action.payload;\n      state.error = null;\n    },\n    fetchUsersFailure: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    addUserStart: (state) => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    addUserSuccess: (state, action) => {\n      state.isLoading = false;\n      state.users.push(action.payload);\n      state.error = null;\n    },\n    addUserFailure: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    updateUserStart: (state) => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    updateUserSuccess: (state, action) => {\n      state.isLoading = false;\n      const updatedUser= action.payload;\n      const index =state.users.findIndex((user)=>user.id === updatedUser.id);\n      if(index !== -1){\n        state.users[index] = updatedPost\n      }\n      state.error = null;\n    },\n    updateUserFailure: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    deleteUserStart: (state) => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    deleteUserSuccess: (state, action) => {\n      state.isLoading = false;\n      state.users = state.users.filter((user) => user.id !== action.payload);\n      state.error = null;\n    },\n    deleteUserFailure: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n  },\n});\n\nexport const {\n  fetchUsersStart,\n  fetchUsersSuccess,\n  fetchUsersFailure,\n  addUserStart,\n  addUserSuccess,\n  addUserFailure,\n  updateUserStart,\n  updateUserSuccess,\n  updateUserFailure,\n  deleteUserStart,\n  deleteUserSuccess,\n  deleteUserFailure,\n} = userSlice.actions;\n\n// Async action to fetch users (for admin dashboard)\nexport const fetchUsers = () => async (dispatch, getState) => {\n  dispatch(fetchUsersStart());\n  const token = selectToken(getState());\n  console.log(token);\n  try {\n    const response = await axios.get(\"http://localhost:8000/api/users\", {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n    dispatch(fetchUsersSuccess(response.data));\n  } catch (error) {\n    dispatch(fetchUsersFailure(error.response.data.message));\n  }\n};\n\n// Async action to add a user\nexport const addUser =\n  (name, email, password, role) => async (dispatch, getState) => {\n    dispatch(addUserStart());\n    const token = selectToken(getState());\n    try {\n      const response = await axios.post(\n        \"http://localhost:8000/api/register\",\n        { name, email, password, role },\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n      dispatch(addUserSuccess(response.data.user));\n    } catch (error) {\n      dispatch(addUserFailure(error.response.data.message));\n    }\n  };\n\n// Async action to update a user\nexport const updateUser = (userId, userData) => async (dispatch, getState) => {\n  dispatch(updateUserStart());\n  const token = selectToken(getState());\n  try {\n    const response = await axios.put(\n      `http://localhost:8000/api/users/${userId}`,\n      userData,\n      {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      }\n    );\n    dispatch(updateUserSuccess(response.data.user));\n  } catch (error) {\n    dispatch(updateUserFailure(error.response.data.message));\n  }\n};\n\n// Async action to delete a user\nexport const deleteUser = (userId) => async (dispatch, getState) => {\n  dispatch(deleteUserStart());\n  const token = selectToken(getState());\n  try {\n    await axios.delete(`http://localhost:8000/api/users/${userId}`, {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n    dispatch(deleteUserSuccess(userId));\n  } catch (error) {\n    dispatch(deleteUserFailure(error.response.data.message));\n  }\n};\n\nexport const selectUsers = (state) => state.user.users;\n\nexport default userSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}